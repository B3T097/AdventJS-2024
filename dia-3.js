/**
 * Santa Claus 游꾼 est치 revisando el inventario de su taller para preparar la 
 * entrega de regalos. Los elfos han registrado los juguetes en un array de 
 * objetos, pero la informaci칩n est치 un poco desordenada. Necesitas ayudar a Santa 
 * a organizar el inventario.
 * 
 * Recibir치s un array de objetos, donde cada objeto representa un juguete y tiene las propiedades:
 * name: el nombre del juguete (string).
 * quantity: la cantidad disponible de ese juguete (entero).
 * category: la categor칤a a la que pertenece el juguete (string).
 * 
 * Escribe una funci칩n que procese este array y devuelva un objeto que organice 
 * los juguetes de la siguiente manera:
 * 
 * Las claves del objeto ser치n las categor칤as de juguetes.
 * Los valores ser치n objetos que tienen como claves los nombres de los juguetes y como valores las cantidades totales de cada juguete en esa categor칤a.
 * Si hay juguetes con el mismo nombre en la misma categor칤a, debes sumar sus cantidades.
 * Si el array est치 vac칤o, la funci칩n debe devolver un objeto vac칤o {}.
 */

/**
 * @param {{ name: string, quantity: number, category: string }[]} inventory
 * @returns {object} The organized inventory
 */
function organizeInventory(inventory) {
    let filter = (category, inventory) => {
        let toysForCategory = inventory.filter((value) => value.category == category);
        let sumToys = [];
        toysForCategory.forEach((toy) => {
            let find = sumToys.findIndex((toySum) => toySum.name == toy.name);
            if (find == -1) {
                sumToys.push(toy);
            } else {
                sumToys[find].quantity += toy.quantity;
            }
        });

        let object = Object.fromEntries(sumToys.map((toy) => [toy.name, toy.quantity]));

        return object;
    };

    let categories = inventory.map((toy) => toy.category);
    categories = categories.filter((value, index) => categories.indexOf(value) === index);
    let newInventory = Object.fromEntries(categories.map((category, index) => [category, filter(category, inventory)]));
    return newInventory;
}